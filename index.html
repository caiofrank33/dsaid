<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family:'Courier New', Courier, monospace;
            font-size: 16px;
            background-color: #f2f2f2;
        }
    </style>
    <style>
        /*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */

        /* Document
        ========================================================================== */

        /**
        * 1. Correct the line height in all browsers.
        * 2. Prevent adjustments of font size after orientation changes in iOS.
        */

        html {
        line-height: 1.15; /* 1 */
        -webkit-text-size-adjust: 100%; /* 2 */
        }

        /* Sections
        ========================================================================== */

        /**
        * Remove the margin in all browsers.
        */

        body {
        margin: 0;
        }

        /**
        * Render the `main` element consistently in IE.
        */

        main {
        display: block;
        }

        /**
        * Correct the font size and margin on `h1` elements within `section` and
        * `article` contexts in Chrome, Firefox, and Safari.
        */

        h1 {
        font-size: 2em;
        margin: 0.67em 0;
        }

        /* Grouping content
        ========================================================================== */

        /**
        * 1. Add the correct box sizing in Firefox.
        * 2. Show the overflow in Edge and IE.
        */

        hr {
        box-sizing: content-box; /* 1 */
        height: 0; /* 1 */
        overflow: visible; /* 2 */
        }

        /**
        * 1. Correct the inheritance and scaling of font size in all browsers.
        * 2. Correct the odd `em` font sizing in all browsers.
        */

        pre {
        font-family: monospace, monospace; /* 1 */
        font-size: 1em; /* 2 */
        }

        /* Text-level semantics
        ========================================================================== */

        /**
        * Remove the gray background on active links in IE 10.
        */

        a {
        background-color: transparent;
        }

        /**
        * 1. Remove the bottom border in Chrome 57-
        * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
        */

        abbr[title] {
        border-bottom: none; /* 1 */
        text-decoration: underline; /* 2 */
        text-decoration: underline dotted; /* 2 */
        }

        /**
        * Add the correct font weight in Chrome, Edge, and Safari.
        */

        b,
        strong {
        font-weight: bolder;
        }

        /**
        * 1. Correct the inheritance and scaling of font size in all browsers.
        * 2. Correct the odd `em` font sizing in all browsers.
        */

        code,
        kbd,
        samp {
        font-family: monospace, monospace; /* 1 */
        font-size: 1em; /* 2 */
        }

        /**
        * Add the correct font size in all browsers.
        */

        small {
        font-size: 80%;
        }

        /**
        * Prevent `sub` and `sup` elements from affecting the line height in
        * all browsers.
        */

        sub,
        sup {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
        }

        sub {
        bottom: -0.25em;
        }

        sup {
        top: -0.5em;
        }

        /* Embedded content
        ========================================================================== */

        /**
        * Remove the border on images inside links in IE 10.
        */

        img {
        border-style: none;
        }

        /* Forms
        ========================================================================== */

        /**
        * 1. Change the font styles in all browsers.
        * 2. Remove the margin in Firefox and Safari.
        */

        button,
        input,
        optgroup,
        select,
        textarea {
        font-family: inherit; /* 1 */
        font-size: 100%; /* 1 */
        line-height: 1.15; /* 1 */
        margin: 0; /* 2 */
        }

        /**
        * Show the overflow in IE.
        * 1. Show the overflow in Edge.
        */

        button,
        input { /* 1 */
        overflow: visible;
        }

        /**
        * Remove the inheritance of text transform in Edge, Firefox, and IE.
        * 1. Remove the inheritance of text transform in Firefox.
        */

        button,
        select { /* 1 */
        text-transform: none;
        }

        /**
        * Correct the inability to style clickable types in iOS and Safari.
        */

        button,
        [type="button"],
        [type="reset"],
        [type="submit"] {
        -webkit-appearance: button;
        }

        /**
        * Remove the inner border and padding in Firefox.
        */

        button::-moz-focus-inner,
        [type="button"]::-moz-focus-inner,
        [type="reset"]::-moz-focus-inner,
        [type="submit"]::-moz-focus-inner {
        border-style: none;
        padding: 0;
        }

        /**
        * Restore the focus styles unset by the previous rule.
        */

        button:-moz-focusring,
        [type="button"]:-moz-focusring,
        [type="reset"]:-moz-focusring,
        [type="submit"]:-moz-focusring {
        outline: 1px dotted ButtonText;
        }

        /**
        * Correct the padding in Firefox.
        */

        fieldset {
        padding: 0.35em 0.75em 0.625em;
        }

        /**
        * 1. Correct the text wrapping in Edge and IE.
        * 2. Correct the color inheritance from `fieldset` elements in IE.
        * 3. Remove the padding so developers are not caught out when they zero out
        *    `fieldset` elements in all browsers.
        */

        legend {
        box-sizing: border-box; /* 1 */
        color: inherit; /* 2 */
        display: table; /* 1 */
        max-width: 100%; /* 1 */
        padding: 0; /* 3 */
        white-space: normal; /* 1 */
        }

        /**
        * Add the correct vertical alignment in Chrome, Firefox, and Opera.
        */

        progress {
        vertical-align: baseline;
        }

        /**
        * Remove the default vertical scrollbar in IE 10+.
        */

        textarea {
        overflow: auto;
        }

        /**
        * 1. Add the correct box sizing in IE 10.
        * 2. Remove the padding in IE 10.
        */

        [type="checkbox"],
        [type="radio"] {
        box-sizing: border-box; /* 1 */
        padding: 0; /* 2 */
        }

        /**
        * Correct the cursor style of increment and decrement buttons in Chrome.
        */

        [type="number"]::-webkit-inner-spin-button,
        [type="number"]::-webkit-outer-spin-button {
        height: auto;
        }

        /**
        * 1. Correct the odd appearance in Chrome and Safari.
        * 2. Correct the outline style in Safari.
        */

        [type="search"] {
        -webkit-appearance: textfield; /* 1 */
        outline-offset: -2px; /* 2 */
        }

        /**
        * Remove the inner padding in Chrome and Safari on macOS.
        */

        [type="search"]::-webkit-search-decoration {
        -webkit-appearance: none;
        }

        /**
        * 1. Correct the inability to style clickable types in iOS and Safari.
        * 2. Change font properties to `inherit` in Safari.
        */

        ::-webkit-file-upload-button {
        -webkit-appearance: button; /* 1 */
        font: inherit; /* 2 */
        }

        /* Interactive
        ========================================================================== */

        /*
        * Add the correct display in Edge, IE 10+, and Firefox.
        */

        details {
        display: block;
        }

        /*
        * Add the correct display in all browsers.
        */

        summary {
        display: list-item;
        }

        /* Misc
        ========================================================================== */

        /**
        * Add the correct display in IE 10+.
        */

        template {
        display: none;
        }

        /**
        * Add the correct display in IE 10.
        */

        [hidden] {
        display: none;
        }

    </style>
    <style>
        body {
            margin: 0 1em;
        }

		.Protoss-race-color {
			color: #088008;
		}
		.Terran-race-color {
			color: #F88C14;
		}
		.Zerg-race-color {
			color: #88409C;
		}

		.Protoss-race-bg-color {
			background-color: #088008;
		}
		.Terran-race-bg-color {
			background-color: #F88C14;
		}
		.Zerg-race-bg-color {
			background-color: #88409C;
		}

		select#unit-selection {
			width: 100%;
    		height: 48px;
		}

        .counter-card {
            border-top: 1px solid #1E1E1E;
            border-radius: 4px;
            margin-bottom: 16px;
			background-color: white;
			box-shadow: 3px 2px 0px #7c7c7c;
        }

        .counter-card-title {
			border-left: 1px solid #1E1E1E;
			border-right: 1px solid #1E1E1E;
            border-bottom: 1px solid #1E1E1E;
        }

		button.counter-card-title {
			width: 100%;

		}

		.counter-card-title button {
			background: inherit;
			display: grid;
			grid-template-columns: 3fr .5fr;
			width: 100%;
            padding-top: 12px;
			/* padding: 0; */
			border: none;
		}

		.unit-to-counter-name {
			display: flex;
    		justify-content: space-between;
		}

		.counter-card-title ul {
			margin: 0;
			padding: 0 0 0 10px;
			list-style: none;
			text-indent: -10px;
		}

		.card-action-bar {
			font-family: monospace;
			font-size: 24px;
			line-height: 36px;
			display: grid;
			grid-template-columns: 1fr 1fr 1fr .5fr;
			border-left: 1px solid #1E1E1E;
			border-right: 1px solid #1E1E1E;
			/* border-bottom: 2px solid #1E1E1E; */
			box-sizing: border-box;
		}

		.card-action-box:not(:last-of-type) {
			border-right: 1px solid #1E1E1E;
			box-sizing: border-box;
		}

		.card-action-box {
			width: 100%;
			height: 100%;
			text-align: center;
			background: #fcfcfc;
		}
		
		.card-action-box button {
			width: 100%;
    		height: 100%;
			background: inherit;
			border: none;
			opacity: .2;
			line-height: 36px;
			text-shadow: 2px 2px #e2e2e2;
		}

		.card-action-box.is-on button {
			opacity: 1;
			font-weight: bold;
		}

		.card-action-box.close-card button {
			color: red;
			opacity: .5;
			font-weight: normal;
		}

        .counter-card-title h2, .counter-card-title code {
            padding: 0 24px;
			margin: 0 0 8px 0;
        }

        .counter-card-title code {
            color: #575757;
			display: block;
        }

		.counter-card-title.hidden-description code {
            /* height: 2.5ch; */
			/* overflow: hidden; */
			display: none;
        }

        /* .counter-card-body-item:not(:last-child) {
            border-bottom: 1px solid #1E1E1E;
        } */
		.counter-card-body {
			padding: 12px 12px 12px 32px;
		}

		.counter-card-body.Terran {
			/* color: #F88C14; */
			border: 1px solid #1E1E1E;
			box-sizing: content-box;
			box-shadow: inset 6px 6px 4px rgb(248 140 20 / 25%), inset -6px -6px 4px rgb(248 140 20 / 25%);
		}
		.counter-card-body.Protoss {
			border: 1px solid #1E1E1E;
			box-sizing: content-box;
			box-shadow: inset 6px 6px 4px rgb(8 128 8 / 15%), inset -6px -6px 4px rgb(8 128 8 / 15%)
		}
		.counter-card-body.Zerg {
			border: 1px solid #1E1E1E;
			box-sizing: content-box;
			box-shadow: inset 6px 6px 4px rgb(136 64 156 / 15%), inset -6px -6px 4px rgb(136 64 156 / 15%);;
		}

        .counter-card-body-item .counter-list li:not(:last-of-type) {
            margin-bottom: 4px;
        }
        .counter-card-body-item .counter-list {
            padding: 0;
			margin: 0;
			list-style: none;
		    text-indent: -12px;
        }

		#multi-counter-output {
			margin-bottom: 1em;
		}

		.multi-counter-item {
			border-radius: 4px;
			color: white;
			
			

			display: grid;
    		grid-template-columns: 3fr .5fr;
		}

		.multi-counter-item:not(:last-of-type) {

			margin-bottom: 8px;
		}


		.multi-counter-item .multi-counter-item-text {
			padding: 8px;
			border-right: 1px solid white;
			box-sizing: border-box;
		}

		.close-multi-counter-item {
			font-family: monospace;
			font-size: 24px;
			line-height: 36px;
			padding: 12px 14px 12px 12px;
			border: none;
			background: none;
			color: white;
		}
    </style>

    <title>DS Aid</title>

</head>
<body>
    <h1 class="title">Direct Strike Aid</h1>
    
    <form>
        <label for="unit-selection">Choose the unit you want to counter</label>
        <select name="Unit section" id="unit-selection" onchange="renderAddCard(this)">
            <option value="empty"></option>
            <optgroup label="Terran"></optgroup>
            <optgroup label="Zerg"></optgroup>
            <optgroup label="Protoss"></optgroup>
        </select>
    </form>
	<div id="multi-counter-output">
		<!-- Output goes here -->
	</div>
    <div id="counter-output">
		<!-- Output goes here -->
	</div>    
</body>
<script>
	
/**
 * SELECTORS
 */

const selectEl = document.querySelector('body > form > select');

const outputContainer = document.querySelector('#counter-output');
const multiCounterOutputEl = document.querySelector('#multi-counter-output');

/**
 * TEMPLATES
 */
 function templateReplacer(template, obj) {
	for (const prop in obj) {
		template = template.replaceAll(`%%${prop}%%`, obj[prop]);
	}

	return template;
}

const counterCardBodyTempl = `
		<div class="counter-card-title hidden-description">
			<button type="button" onclick="toggleDescription(this.parentElement)">
				<h2 class="unit-to-counter-name">%%name%%</h2>
				<h2 class="toggle-indicator">+</h2>
			</button>
			
            <code><ul>%%description%%</ul></code>
		</div>
		<div class="card-action-bar">
			<div id="race-toggle-P" class="card-action-box race-toggle-action %%Protoss_is_on%%" >
				<button class="Protoss-race-color" type="button" onclick="renderVisibleRaceUpdate('Protoss', this)">P</button>
			</div>
			<div id="race-toggle-T" class="card-action-box race-toggle-action %%Terran_is_on%%">
				<button class="Terran-race-color" type="button" onclick="renderVisibleRaceUpdate('Terran', this)">T</button>
			</div>
			<div id="race-toggle-Z" class="card-action-box race-toggle-action %%Zerg_is_on%%">
				<button class="Zerg-race-color" type="button" onclick="renderVisibleRaceUpdate('Zerg', this)">Z</button>
			</div>
			<div class="card-action-box close-card">
				<button type="button" onclick="renderCloseCard(this)">X</button>
			</div>
		</div>
		<div class='counter-card-body %%active_race%%'>
			%%counterCardBodyItemTempls%%
		</div>
`;

const counterCardBodyItemTempl = `
	<div class="counter-card-body-item %%race%%" %%is_hidden%%>
		<ul class="counter-list">
			%%counterCardListItemTempls%%
		</ul>
	</div>
`;

const counterCardListItemTempl = `
	<li><strong>%%name%%</strong>: %%counterDescription%%</li>
`;

const counterCardListItem2Templ = `
	<li><strong>%%name%%</strong></li>
`;

const multiCounterItemTempl = `
	<div class="multi-counter-item-text">
		<strong>(%%unit_count%%)</strong> <strong>%%counter_name%%</strong> counters <strong>%%unit_names%%</strong>
	</div>
	<button type="button" class="close-multi-counter-item" onclick="renderCloseMultiCounter('%%counter_name%%', '%%unit_count%%', this)">
		X
	</button>
`;

/**
 * HELPERS
 */

function getSelectedUnits() {
	const unitToCounterNames = [];
	const unitToCounterEls = document.querySelectorAll('.counter-card .unit-to-counter-name > span');

	unitToCounterEls.forEach(el => {
		unitToCounterNames.push(el.innerHTML);
	});

	return unitToCounterNames;
}
/**
 * 
 * Interaction
 * 
 */
function renderAddCard(selectObj) {
	const enemyUnitName = selectObj.options[selectObj.selectedIndex].value
	if (enemyUnitName === 'empty') {
		console.log('empty selection')
		return;
	}

	selectObj.value = 'empty';

	const unit = units.find(u => u.name === enemyUnitName);
	
	renderCounterCard(unit);

	var unitRace = unit.race;

	optGroupRaceOrder.sort((raceA, raceB) => {
		return raceA.toLowerCase() === unitRace.charAt(0).toLowerCase() ? 1 : -1;
	}).reverse();

	renderResetUnitSelect(optGroupRaceOrder);
	renderMultiCounterItems();
}

function renderCloseCard(el) {
	el.parentElement.parentElement.parentElement.remove();

	renderMultiCounterItems();
	renderResetUnitSelect(optGroupRaceOrder);
}

function renderCloseMultiCounter(unitName, counterCount, el) {
	el.parentElement.remove();

	if (!hideMultiCounters[unitName]) {
		hideMultiCounters[unitName] = counterCount;
	}

}

function toggleDescription(cardTitleEl) {
	const toggleEl = cardTitleEl.querySelector('.toggle-indicator');
	if (cardTitleEl.classList.contains('hidden-description')) {
		cardTitleEl.classList.remove('hidden-description');
		toggleEl.innerHTML = '-';
	} else {
		cardTitleEl.classList.add('hidden-description');
		toggleEl.innerHTML = '+';
	}
}


function renderVisibleRaceUpdate(race, cardActionEl) {
	const cardActionBarEl = cardActionEl.parentElement.parentElement;

	cardActionBarEl.querySelectorAll('.race-toggle-action').forEach(el => {
		switch (el.id) {
			case 'race-toggle-P':
				if (race === Race.Protoss) {
					el.classList.add('is-on');
					cardActionBarEl.parentElement.querySelector(`.counter-card-body-item.${Race.Protoss}`).removeAttribute('hidden');
				} else {
					el.classList.remove('is-on');
					cardActionBarEl.parentElement.querySelector(`.counter-card-body-item.${Race.Protoss}`).setAttribute('hidden', true);
				}
				
				break;
			case 'race-toggle-T':
				if (race === Race.Terran) {
					el.classList.add('is-on');
					cardActionBarEl.parentElement.querySelector(`.counter-card-body-item.${Race.Terran}`).removeAttribute('hidden');
				} else {
					el.classList.remove('is-on');
					cardActionBarEl.parentElement.querySelector(`.counter-card-body-item.${Race.Terran}`).setAttribute('hidden', true);
				}
				break;
			case 'race-toggle-Z':
				if (race === Race.Zerg) {
					el.classList.add('is-on');
					cardActionBarEl.parentElement.querySelector(`.counter-card-body-item.${Race.Zerg}`).removeAttribute('hidden');
				} else {
					el.classList.remove('is-on');
					cardActionBarEl.parentElement.querySelector(`.counter-card-body-item.${Race.Zerg}`).setAttribute('hidden', true);
				}
				break;
		
			default:
				break;
		}
	});


	currentShowingRace = race;
	cardActionBarEl.nextElementSibling.classList.value = currentShowingRace + ' ' + 'counter-card-body'
}

function renderCounterCard(scUnit) {
	const counterListContainer = document.createElement('ul');
	counterListContainer.className = 'counter-list'

	const protossCounterListItems = scUnit.counters.filter(counter => counter.race === Race.Protoss).reduce((agg, counter) => {
		agg += counter.counterDescription ? templateReplacer(counterCardListItemTempl, counter) : templateReplacer(counterCardListItem2Templ, counter);
		return agg;
	}, '');

	const terranCounterListItems = scUnit.counters.filter(counter => counter.race === Race.Terran).reduce((agg, counter) => {
		agg += counter.counterDescription ? templateReplacer(counterCardListItemTempl, counter) : templateReplacer(counterCardListItem2Templ, counter);

		return agg;
	}, '');

	const zergCounterListItems = scUnit.counters.filter(counter => counter.race === Race.Zerg).reduce((agg, counter) => {
		agg += counter.counterDescription ? templateReplacer(counterCardListItemTempl, counter) : templateReplacer(counterCardListItem2Templ, counter);

		return agg;
	}, '');

	const shouldHideProtoss = currentShowingRace !== Race.Protoss;
	const shouldHideTerran = currentShowingRace !== Race.Terran;
	const shouldHideZerg = currentShowingRace !== Race.Zerg;


	const protossCardBodyItemHtml = templateReplacer(counterCardBodyItemTempl, { race: 'Protoss', counterCardListItemTempls: protossCounterListItems, is_hidden: shouldHideProtoss ? 'hidden=true' : '' })
	const terranCardBodyItemHtml = templateReplacer(counterCardBodyItemTempl, { race: 'Terran', counterCardListItemTempls: terranCounterListItems, is_hidden: shouldHideTerran ? 'hidden=true' : '' })
	const zergCardBodyItemHtml = templateReplacer(counterCardBodyItemTempl, { race: 'Zerg', counterCardListItemTempls: zergCounterListItems, is_hidden: shouldHideZerg ? 'hidden=true' : '' })

	const cardHtml = document.createElement("div");
	cardHtml.className = "counter-card";
	cardHtml.innerHTML = templateReplacer(counterCardBodyTempl, 
		{ 
			name: scUnit.name, 
			description: scUnit.description,
			Protoss_is_on: shouldHideProtoss ? '' : 'is-on',
			Terran_is_on: shouldHideTerran ? '' : 'is-on',
			Zerg_is_on: shouldHideZerg ? '' : 'is-on',
			active_race: currentShowingRace,
			counterCardBodyItemTempls: protossCardBodyItemHtml + terranCardBodyItemHtml + zergCardBodyItemHtml 
		}
	);
	outputContainer.insertBefore(cardHtml, outputContainer.firstChild);
}

function renderMultiCounterItems() {
	const unitToCounterNames = getSelectedUnits();

	const unitsToCounter = units.filter(u => unitToCounterNames.indexOf(u.name) >= 0);

	const allCounters = unitsToCounter.filter(u => u.name.toLowerCase() !== 'tip' && u.name.toLowerCase() !== 'todo').reduce((agg, u) => {
		u.counters.filter(cu => cu.name.toLowerCase() !== 'tip' && cu.name.toLowerCase() !== 'todo').forEach(cu => {
			if (!agg[cu.name] && !Array.isArray(agg[cu.name])) {
				agg[cu.name] = { race: cu.race, counters: [u.name]};
			} else {
				agg[cu.name].counters.push(u.name);
			}
		});

		return agg;
	}, {});

	const multiCounterEls = [];
	let ceiling = 4

	for (const [counterUnitName, counterUnitData] of Object.entries(allCounters)
			.sort((grpA, grpB) => {
				if (grpA[1].counters.length === grpB[1].counters.length) {
					return 0;
				}
				return grpA[1].counters.length > grpB[1].counters.length ? -1 : 1
			})
			.sort((grpA, grpB) => {
				if (grpA[1].race === grpB[1].race) {
					return 0;
				}
				return grpA[1].race > grpB[1].race ? -1 : 1
			})
		) {

		if (hideMultiCounters[counterUnitName]) {
			continue;
		}

		if (counterUnitData.counters.length > ceiling) {
			ceiling = counterUnitData.counters.length;
		}


		if (counterUnitData.counters.length >= (ceiling - 2)) {
			const multiCounterEl = document.createElement("div");
			multiCounterEl.classList.add('multi-counter-item', `${counterUnitData.race}-race-bg-color`);
			multiCounterEl.innerHTML = templateReplacer(multiCounterItemTempl, { counter_name: counterUnitName, unit_count: counterUnitData.counters.length, unit_names: `${counterUnitData.counters.join(', ')}` });

			multiCounterEls.push(multiCounterEl);
		}
	}

	multiCounterOutputEl.innerHTML = "";

	for (const el of multiCounterEls) {
		multiCounterOutputEl.append(el);
	}
}

function renderResetUnitSelect(raceOrder) {
	selectEl.innerHTML = '';
	const emptyOptEl = document.createElement("option");
	selectEl.appendChild(emptyOptEl);

	raceOrder.forEach(raceOrderValue => {
		const optGrpEl = document.createElement("optgroup");
		optGrpEl.label = raceOrderValue === 'T' ? Race.Terran : raceOrderValue === 'Z' ? Race.Zerg : Race.Protoss;

		selectEl.appendChild(optGrpEl);
	});

	const alreadySelectedUnits = getSelectedUnits();

	units.filter(u => alreadySelectedUnits.indexOf(u.name) === -1).forEach(u => {
		const el = document.createElement("option"); // terranOptGroupEl.appendChild(document.createElement("option"));
		el.value = u.name;
		el.textContent = u.name;

		switch (u.race) {
			case Race.Terran: {
	
				document.querySelector('body > form > select > optgroup[label="Terran"]').appendChild(el);
				break;
			}
			case Race.Zerg: {
				document.querySelector('body > form > select > optgroup[label="Zerg"]').appendChild(el);
				break;
			}
			case Race.Protoss: {
				document.querySelector('body > form > select > optgroup[label="Protoss"]').appendChild(el);
				break;
			}
		}
	});
}

function getDpsText(dpsCopy, attribute, target) {
	target = (target || '').replace('Targets ', '');
	attribute = attribute ? `to ${attribute}` : ``;
	return `${target} DPS ${attribute} ${dpsCopy}`.trim();
}

function getDpsText2(dpsCopy, bonusCopy, target) {
	target = (target || '').replace('Targets ', '');
	return `${target} DPS ${dpsCopy}, bonus ${bonusCopy}`.trim();
}

const TerranUnitType = {
	Ghost: 'Ghost',
	Marine: 'Marine',
	Marauder: 'Marauder',
	Reaper: 'Reaper',
	Hellbat: 'Hellbat',
	Hellion: 'Hellion',
	Liberator: 'Liberator',
	Medivac: 'Medivac',
	Banshees: 'Banshees',
	Raven: 'Raven',
	SiegeTank: 'Siege Tank',
	MissileMech: 'Missile Mech Guy',
	WidowMine: 'Widow Mine',
	Viking: 'Viking',
	Thor: 'Thor',
	BattleCruiser: 'Battle Cruiser',
	TODO: 'TODO',
};

const ZergUnitType = {
	Baneling: 'Baneling',
	Broodlord: 'Broodlord',
	Corruptor: 'Corruptor',
	Hydralisk: 'Hydralisk',
	Infestor: 'Infestor',
	Lurker: 'Lurker',
	Mutalisk: 'Mutalisk',
	Queen: 'Queen',
	Ravager: 'Ravager',
	Roach: 'Roach',
	SwarmHost: 'Swarm Host',
	Ultralisk: 'Ultralisk',
	Viper: 'Viper',
	Zergling: 'Zergling',
	TODO: 'TODO',
};

const ProtossUnitType = {
	Adept: 'Adept',
	Archon: 'Archon',
	Carrier: 'Carrier',
	Colossus: 'Colossus',
	Disruptor: 'Disruptor',
	HighTemplar: 'High Templar',
	Immortal: 'Immortal',
	Phoenix: 'Phoenix',
	Sentry: 'Sentry',
	Stalker: 'Stalker',
	Tempest: 'Tempest',
	VoidRay: 'Void Ray',
	Zealot: 'Zealot',
	TODO: 'TODO',
	_LaserFlyer_: '_LaserFlyer_',
};

const Race = {
	Terran: "Terran",
	Zerg: "Zerg",
	Protoss: "Protoss"
}

const TARGETS_GROUND = 'Targets ground';
const TARGETS_AIR = 'Targets air';
const TARGETS_GROUND_AIR = 'Targets ground and air';
const LIGHT_ATTR = 'Light';
const ARMORED_ATTR = 'Armored';
const BONUS_TO_LIGHT = `Bonus damage to ${LIGHT_ATTR}`;
const BONUS_TO_ARMORED = `Bonus damage to ${ARMORED_ATTR}`;
const BIO_ATTR = 'Bio';
const PSIONIC_ATTR = 'Psionic';
const MECH_ATTR = 'Mech';
const BONUS_TO_BIO = `Bonus damage to ${BIO_ATTR}`;
const BONUS_TO_MECH = `Bonus damage to ${MECH_ATTR}`;
const MASSIVE_ATTR = 'Massive';
const BONUS_TO_MASSIVE = `Bonus damage to ${MASSIVE_ATTR}`;
const SPLASH_DAMAGE = 'Does splash damage';
const CLOAKED = 'Cloaked';
const DETECTOR = 'Detector';
const RANGE_LESS_THAN_1 = 'Range < 1';
const RANGE_1 = 'Range 1';
const RANGE_2 = 'Range 2';
const RANGE_3 = 'Range 3';
const RANGE_4 = 'Range 4';
const RANGE_5 = 'Range 5';
const RANGE_6 = 'Range 6';
const RANGE_7 = 'Range 7';
const RANGE_8 = 'Range 8';
const RANGE_9 = 'Range 9';
const RANGE_10 = 'Range 10';

const _DAMAGE_PER_SECOND = 'DPS'
const _TANK = 'Tank';

const IS_GROUND_UNIT = 'Ground Unit';
const IS_AIR_UNIT = 'Ground Unit';
const IS_GROUND_AND_AIR_UNIT = 'Ground/Air Unit';


class ScUnitCounter {
	constructor(race, name, counterDescription) {
		this.name = name;
		this.race = race;
		this.counterDescription = counterDescription;
	}
}

class ScUnit {
	constructor(name, description, race, counters) {
		this.name = name;
		this.description = Array.isArray(description) ? description.map(d => getDescriptionEl(d)).filter(d => d && d.length).join('') : description;
		this.race = race;
		this.counters = counters;
	}
}

function getDescriptionEl(text) {
	if (text) {
		return `<li><strong>${text.slice(0, 3)}</strong>${text.slice(3)}</li>`;
	}
}

class TerranUnit extends ScUnit {
	constructor(name, description, counters) {
		super(name, description, Race.Terran, counters);
	}
}

class ZergUnit extends ScUnit {
	constructor(name, description, counters) {
		super(name, description, Race.Zerg, counters);
	}
}

class ProtossUnit extends ScUnit {
	constructor(name, description, counters) {
		super(name, description, Race.Protoss, counters);
	}
}

const terranUnits = [
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////// TERRAN
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	new TerranUnit(TerranUnitType.Marine, [BIO_ATTR, LIGHT_ATTR, TARGETS_GROUND_AIR, getDpsText('9.8 (+1.6)'), getDpsText('14.7 (+2.4) (Stimpack)'), RANGE_5, IS_GROUND_UNIT], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Reaper, 'They have KD8 charge and they do great against marines'),
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, 'Mix in marines'),
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, 'Put a few in the back for some bonus firepower'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Baneling, 'Blow them up'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Zergling, 'Finish them off with lings'),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Zealot, `Don't build to many bc Terran can counter with firebats`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Adept, 'Put adepts in front to take initial damage and then shape back'),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Disruptor, 'Disruptors are expensive but can cut an army down before the battle starts'),
	]),
	new TerranUnit(TerranUnitType.Marauder, [ARMORED_ATTR, BIO_ATTR, TARGETS_GROUND, getDpsText('9.3 (+0.93)'), getDpsText('14.1 (+1.4) (Stimpack)'), getDpsText('+10 (+1)', ARMORED_ATTR), getDpsText('+14.1 (+1.4) (Stimpack)', ARMORED_ATTR), RANGE_6, IS_GROUND_UNIT], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, `Get the upgrades`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Zergling, `Too many lings, too few Marauders`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, `Add Hydras later for more damage`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Zealot, `Zealots do well at first`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, `Immortals next, don't forget AA`),
	]),
	new TerranUnit(TerranUnitType.Reaper, [BIO_ATTR, LIGHT_ATTR, TARGETS_GROUND, getDpsText('10.1 (+2.5)'), IS_GROUND_UNIT], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Reaper, `Get a lot`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, `Sprinkle in some marines`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, `Build in back`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, `?`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Adept, `?`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Stalker, `?`),
	]),
	new TerranUnit(TerranUnitType.Ghost, [BIO_ATTR, PSIONIC_ATTR, IS_GROUND_UNIT, TARGETS_GROUND_AIR, getDpsText('9.3 (+0.93)'), getDpsText('9.3 (+0.93)', LIGHT_ATTR), RANGE_6, `Steady Targeting`, `EMP`, CLOAKED], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, `?`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, `?`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Zergling, `?`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Stalker, `?`),
	]),
	new TerranUnit(TerranUnitType.Hellbat, [BIO_ATTR, LIGHT_ATTR, MECH_ATTR, TARGETS_GROUND, IS_GROUND_UNIT, getDpsText('12.6 (+1.4)'), getDpsText('+8.4 (+0.7) (Infernal Pre-Igniter)', LIGHT_ATTR, RANGE_2)], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, `Has greater range and numbers`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Hellbat, `Deals bonus damage against itself`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Baneling, `Does bonus damage against light units`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, `Roaches trade well`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Queen, `For some wholesome healing`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Adept, `Deals bonus damage to light`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Sentry, `Sheilds help with defense`),
	]),
	new TerranUnit(TerranUnitType.SiegeTank, [ARMORED_ATTR, MECH_ATTR, TARGETS_GROUND, IS_GROUND_UNIT, SPLASH_DAMAGE, getDpsText('18.69 (+1.87)'), getDpsText('+14.02 (+0.47)', ARMORED_ATTR)], [
		new ScUnitCounter(Race.Terran, TerranUnitType.SiegeTank, `You really need to kill the army in front and then kill the tanks. But some tanks of your own can help`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.SwarmHost, `The little guys they shoot out can absorb tank shots but you mainly need to focus on the army in front of the tanks.`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, `Immos are good against tanks but you mainly need to focus on the army in front of the tanks.`),
	]),
	new TerranUnit(TerranUnitType.Thor, [
			ARMORED_ATTR, 
			MASSIVE_ATTR, 
			MECH_ATTR, 
			TARGETS_GROUND_AIR, 
			getDpsText2(`65.9 (+6.59)`, '', TARGETS_GROUND),
			getDpsText2(`11.2 (+1.87)`, `+11.2 (+1.87) vs Light`, TARGETS_AIR),
			getDpsText2(`27.5 (+3.3)`, `+11.0 (+1.1) vs Massive`, TARGETS_AIR),
		], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Thor, `Switch them to high impact mode`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Ultralisk, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Viper, `Blinding cloud`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, `Immos deal bonus to mech`),
	]),
	new TerranUnit(TerranUnitType.Raven, [LIGHT_ATTR, MECH_ATTR, IS_AIR_UNIT, DETECTOR], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, `To kill Raven`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, `To kill auto-turrets`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Viking, `Does bonus damage to mechanical`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, `EMP`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Queen, `To kill Raven`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, `To kill auto-turret`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Phoenix, `Does bonus damage to Raven`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, `Does bonus damage to auto-turret`),
	]),
	new TerranUnit(TerranUnitType.Liberator, [ARMORED_ATTR, MECH_ATTR, TARGETS_GROUND_AIR, IS_AIR_UNIT, `${RANGE_10} (+3)`, getDpsText('65.8 (+4.39)', '', 'Ground'), getDpsText('7.75 (+1.55)', '', 'Air')], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, `These are a good trade against libs`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Viking, `Deals bonus damage to mechanical`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Corruptor, `a`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Viper, `Abduct pulls libs out of "ground-target mode" leaving them vuln for a bit`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Infestor, `Fungal Growth`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.VoidRay, `Deals bonus damage to armored units`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Tempest, `For range`),
	]),
	new TerranUnit(TerranUnitType.BattleCruiser, [ARMORED_ATTR, MASSIVE_ATTR, MECH_ATTR, IS_AIR_UNIT, TARGETS_GROUND_AIR, getDpsText2('49.8 (+6.2)', '', 'Ground'), getDpsText2('31.1 (+6.2)', '', 'Air')], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Thor, `Use High Impact Payload mode`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Corruptor, `Deals bonus damage to massive`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.VoidRay, `Deals bonus to armored`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Tempest, `Deals bonus to massive`),
	]),
 ];

const zergUnits = [
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////// Zerg
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	new ZergUnit(ZergUnitType.Zergling, [LIGHT_ATTR, BIO_ATTR, TARGETS_GROUND, `${_DAMAGE_PER_SECOND} 10 (+2)`, `With Adrenal Gland Upg: ${_DAMAGE_PER_SECOND} 14.3 (+2.86)`, RANGE_LESS_THAN_1], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Hellbat, 'upg. Pre-Igniter'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Baneling, 'spread them out'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Zergling, 'to give your army some hardiness'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Lurker, 'lol'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Infestor, 'use Fungal Growth'),
		new ScUnitCounter(Race.Protoss, `General Strategy`, `Build a minimal number of T1 units`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.HighTemplar, `Psionic Storm`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Archon, `${BONUS_TO_BIO}, ${SPLASH_DAMAGE}`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Colossus, `lol`),
	]),
	new ZergUnit(ZergUnitType.Baneling, [BIO_ATTR, BONUS_TO_LIGHT, TARGETS_GROUND, RANGE_LESS_THAN_1], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, `in front to tank damage`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, `build way back so they're not hit`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Raven, `distract banes with auto-turret`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Baneling, `build some banes; space them out to blow up more of theirs`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Queen, ``),
		new ScUnitCounter(Race.Protoss, `Tip`, `avoid Zealots and Adepts as they take bonus damage from banelings`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Stalker, `with blink`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.HighTemplar, `get Psionic Storm`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Archon, `enjoy the splash damage`),
	]),
	new ZergUnit(ZergUnitType.Roach, [ARMORED_ATTR, BIO_ATTR, _TANK, TARGETS_GROUND, `${_DAMAGE_PER_SECOND} 11.2 (+1.4)`, RANGE_4], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, `Bonus to Armored`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Zergling, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, `Let rest off army tank for Hydra`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Ultralisk, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Zealot, `Zealots are not great against Roach but can act as tank`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, `Bonus damage; but watch out for lings!`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Disruptor, `One shot kill`),
	]),
	new ZergUnit(ZergUnitType.Ravager, [BIO_ATTR, TARGETS_GROUND, getDpsText('14.04 (+1.75)'), RANGE_6], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Ultralisk, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, ``),
	]),
	new ZergUnit(ZergUnitType.Queen, [BIO_ATTR, TARGETS_GROUND_AIR, `Healer`, getDpsText('11.2 (+2.8)', null, 'Ground'), `Ground ${RANGE_5}`, getDpsText(`12.6 (+1.4)`, null, 'Air'), `Air ${RANGE_7}`], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, ``),
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, `Steady Target`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Liberator, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, `add lings and banes as needed`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Ravager, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.HighTemplar, `Feedback to drain their healing ability. May not need storm. Make sure they're close enough to use feedback.`),
	]),
	new ZergUnit(ZergUnitType.Hydralisk, [LIGHT_ATTR, BIO_ATTR, TARGETS_GROUND_AIR, `${RANGE_5} (+1)`, `${_DAMAGE_PER_SECOND} 20.4 (+1.7)`], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, `Build lots`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, `Add some ghosts for Steady Target`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, `High HP + fast health regen`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Queen, `Healing`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Lurker, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.HighTemplar, `Storm`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, `Clean up after storm`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Disruptor, `Disruptors are a 1 shot kill`),
	]),

	new ZergUnit(ZergUnitType.Lurker, [
		ARMORED_ATTR, 
		BIO_ATTR, 
		CLOAKED, 
		TARGETS_GROUND,
		`${RANGE_8} (+2)`, getDpsText(`14.0 (+1.4)`), 
		`${_DAMAGE_PER_SECOND} to ${ARMORED_ATTR} +7.0 (+0.7)`
	], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, ``),
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, ``),
		new ScUnitCounter(Race.Terran, TerranUnitType.Liberator, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, `Roaches can win short term`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Lurker, `Build more lurkers than them`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Queen, `To heal lurkers`),
		new ScUnitCounter(Race.Protoss, `Tip`, `Disruptor shots will not kill lurkers and queens will heal`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.HighTemplar, `Feedback the queens`),
	]),



	new ZergUnit(ZergUnitType.Mutalisk, [LIGHT_ATTR, BIO_ATTR, TARGETS_GROUND_AIR, `8.26 (+0.92) (1st bounce) 2.75 (+0.31) (2nd bounce) 0.92 (+0.10) (3rd bounce)`, RANGE_3, `Weak against AOE attacks`], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, ``),
		new ScUnitCounter(Race.Terran, TerranUnitType.WidowMine, ``),
		new ScUnitCounter(Race.Terran, TerranUnitType.Thor, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Queen, `Healing makes em hard to kill`), 
		new ScUnitCounter(Race.Zerg, ZergUnitType.Infestor, `Fungal Growth`), 
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, ``), 
		new ScUnitCounter(Race.Zerg, ZergUnitType.Corruptor, `At least a few to take damage`), 
		new ScUnitCounter(Race.Zerg, ZergUnitType.Mutalisk, `Or counter with mutas if youre not caught by surprise`), 
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Stalker, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Archon, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.HighTemplar, `Storm`),
	]),
	new ZergUnit(ZergUnitType.Corruptor, [
			 ARMORED_ATTR,
			 BIO_ATTR,
			 TARGETS_AIR,
			 IS_AIR_UNIT,
			 BONUS_TO_MASSIVE,
			 `${_DAMAGE_PER_SECOND} 10.29 (+0.74)`,
			 `${_DAMAGE_PER_SECOND} to ${ARMORED_ATTR} +4.4 (+0.7)`
		], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Viking, ``),
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, `Steady Target`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Corruptor, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Viper, `Parasitic bomb`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Queen, `Healing`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.VoidRay, `Bonus damage`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.HighTemplar, `Storm`),
	]),
	new ZergUnit(ZergUnitType.Infestor, `TODO`, [
		new ScUnitCounter(Race.Terran, `Tip`, `No idea`),
		new ScUnitCounter(Race.Zerg, `Tip`, `No idea`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Disruptor, `They prefer Infestors`),
	]),

	new ZergUnit(ZergUnitType.SwarmHost, [ARMORED_ATTR, BIO_ATTR, CLOAKED, 'Deploys locust that attack/absorb dmg', 'Great for holding the line'], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Liberator, `They are effecient killers`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, `Not confident in this one`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Disruptor, `NOT A ONE SHOT KILL!`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Phoenix, `Can elevate them`),
	]),
	new ZergUnit(ZergUnitType.Ultralisk, [ARMORED_ATTR, BIO_ATTR, MASSIVE_ATTR, SPLASH_DAMAGE, getDpsText('57.38 (+4.9)'), RANGE_1], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, `Snipe`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, `Bonus damage to armored`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Lurker, `to kill`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.SwarmHost, `to distract`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Broodlord, `to distract`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, `wreck.gif`),
	]),
	new ZergUnit(ZergUnitType.Broodlord, [ARMORED_ATTR, MASSIVE_ATTR, BIO_ATTR, IS_AIR_UNIT, TARGETS_GROUND, `${_DAMAGE_PER_SECOND} 22.4 (+2.2)`, RANGE_10], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Thor, `c-c-cyaaaaaaaa`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Corruptor, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Tempest, ``),
	]),
	
 ];

const protossUnits = [
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	///////////////////////// PROTOSS
	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	new ProtossUnit(ProtossUnitType.Zealot, [LIGHT_ATTR, BIO_ATTR, TARGETS_GROUND, getDpsText('18.6 (+2.33)')], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Hellbat, `Get Infernal Pre-igniter upgrade`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Baneling, `Banes blow them up but use lings or roaches to finish the job`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Zergling, ``),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Adept, `Adept does bonus damage to light units. Research glaive upgrade`)
	]),
	new ProtossUnit(ProtossUnitType.Stalker, [ARMORED_ATTR, MECH_ATTR, TARGETS_GROUND_AIR, getDpsText2('9.7 (+0.75)', '+3.7 (+0.75) vs Armored')], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, `They do bonus damage to armored units. Research all upgrades.`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Zergling, `Do speed upgrade`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, `Add Hydras for a well balanced army`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, `Add Hydras for a well balanced army`),
	]),
	new ProtossUnit(ProtossUnitType.Adept, [LIGHT_ATTR, TARGETS_GROUND, getDpsText2('6.2 (+0.62)', '+7.45 (+0.62) vs Light'), getDpsText2('9 (+0.9) Resonating Glaives', '+10.81 (+0.9) Resonating Glaives'), RANGE_4], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marauder, 'Marauders are armored which adepts are weak against'),
		new ScUnitCounter(Race.Terran, TerranUnitType.Raven, 'Turrets'),
		new ScUnitCounter(Race.Terran, TerranUnitType.Liberator, 'Defender mode'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Zergling, 'Build a bunch...'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, 'These are good too'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, 'Get some hydras once T2'),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Stalker, 'Get blink'),
	]),
	new ProtossUnit(ProtossUnitType.Archon, [PSIONIC_ATTR, MASSIVE_ATTR, SPLASH_DAMAGE, IS_GROUND_UNIT, TARGETS_GROUND_AIR, getDpsText2('20 (+2.4)', '+8 (+0.8) vs Biological'), RANGE_3], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, 'EMP Round spell as it deals 100 damage to shields instantly'),
		new ScUnitCounter(Race.Terran, TerranUnitType.Liberator, 'Liberators have better range and archons are quite clunky'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, 'Hydras will destroy the archons'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Roach, 'Some roaches out front to tank damage'),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, ''),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Sentry, 'Couple of sentries for sheild'),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Disruptor, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Archon, 'If not positioned out front make sure they are useful in battle'),
	]),
	
	new ProtossUnit(ProtossUnitType.Immortal, [ARMORED_ATTR, IS_GROUND_UNIT, TARGETS_GROUND, MECH_ATTR, getDpsText2('19.2 (+1.92)', '+28.9 (+2.9) vs Armored'), 'Barrier ability absorbs up to 100 damage;', RANGE_6], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, `Marines don't take bonus damage from Immos`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Liberator, 'Immos cant hit and libs destroy'),
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, 'EMP'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Zergling, `Immos can't touch them`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, `Hydras do lots of damage but they have to stay alive`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Ravager, `They're not armored so they can soak damage. Corrosive bile can be effective if it hits Immo`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Zealot, `They do well against Immos and Cost 1/3rd of the price`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Immortal, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Phoenix, `Pick up some of their immortals to spread damage/second out`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.VoidRay, `They're slow to kill but can help damage while in air from Phoenix`),
	]),
	
	new ProtossUnit(ProtossUnitType.Phoenix, [LIGHT_ATTR, IS_AIR_UNIT, TARGETS_AIR, getDpsText2('12.7 (+2.5)', '+12.7 vs Light'), 'Can lift enemy ground units',  `${RANGE_5} (+2)`], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, 'Get stims and sheilds'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, 'Hydras can overwhelm with numbers even though they can be picked up'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Infestor, 'Fungal Growth'),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Archon, `Archons are massive and can't be lifted`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.VoidRay, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.HighTemplar, `Storm!`),
	]),

	new ProtossUnit(ProtossUnitType.VoidRay, [ARMORED_ATTR, MECH_ATTR, IS_AIR_UNIT, TARGETS_GROUND_AIR, getDpsText2('16.8 (+2.8)', '+11.2 vs Armored; +28 vs Armored w/ Prismatic Alignment'), RANGE_6], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Marine, `Get stims and sheild upgrades`),
		new ScUnitCounter(Race.Terran, TerranUnitType.WidowMine, `Get some Widow Mines for AOE`),
		new ScUnitCounter(Race.Terran, TerranUnitType.Ghost, `EMP to take out shields`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Queen, `Void Rays struggle to kill Queens`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Infestor, `Fungal growth to slow and hurt the void rays`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Viper, `Parasitic bomb + Fungal growth = good`),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Hydralisk, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.HighTemplar, `Storm!`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.VoidRay, ``),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Archon, `For the splash damage`),
	]),
	new ProtossUnit(ProtossUnitType.Carrier, [ARMORED_ATTR, MASSIVE_ATTR, MECH_ATTR, IS_AIR_UNIT, TARGETS_GROUND_AIR, getDpsText2('37.4 (+7.5)'), RANGE_8], [
		new ScUnitCounter(Race.Terran, TerranUnitType.Thor, 'Use High Impact mode as it does lots of damage to a single unit'),
		new ScUnitCounter(Race.Zerg, ZergUnitType.Corruptor, `Bonus damage against massive units`),
		new ScUnitCounter(Race.Protoss, ProtossUnitType.Tempest, `Bonus damage against massive units`),
	]),
];

const units = protossUnits.concat(terranUnits).concat(zergUnits);

const optGroupRaceOrder = ['P', 'T', 'Z'];
let currentShowingRace = Race.Terran;
const hideMultiCounters = {};

/**
 * 
 * INIT
 * 
 */
function init() {
	renderResetUnitSelect(optGroupRaceOrder);
}

init();

/**
 * Ideas to make this good...
 * Highlight units that are disadvantaged against more than 1 enemy
 * Redo relationships with units and counter units so its easy to tell user what not to build
 * 
 * Add tips like: Toss is especially weak against lings in T1
 * 
 */

</script>
</html>
